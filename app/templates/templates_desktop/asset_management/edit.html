{% extends "templates_desktop/layouts/modern_layout.html" %}

{% block title %}Edit Asset{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-6 py-8">
    <!-- Header -->
    <div class="bg-blue-600 rounded-lg p-4 mb-6">
        <h1 class="text-xl font-bold text-white">Edit Asset</h1>
        <p class="text-blue-100 text-sm">{{ asset.asset_name }}</p>
    </div>

    <!-- Form -->
    <div class="bg-white rounded-lg shadow p-6">
        <form method="POST" action="/asset_management/edit/{{ asset.asset_id }}" enctype="multipart/form-data">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Asset Name -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Asset Name</label>
                    <input type="text" name="asset_name" value="{{ asset.asset_name }}" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Manufacture -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Manufacture</label>
                    <input type="text" name="manufacture" value="{{ asset.manufacture or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Model -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Model</label>
                    <input type="text" name="model" value="{{ asset.model or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Serial Number -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Serial Number</label>
                    <input type="text" name="serial_number" value="{{ asset.serial_number or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Purchase Cost -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Purchase Cost</label>
                    <input type="number" name="purchase_cost" value="{{ asset.purchase_cost or 0 }}" step="0.01" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Journal -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Journal</label>
                    <input type="text" name="journal" value="{{ asset.journal or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Photo Upload -->
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Photo Upload</label>
                    <input type="file" name="photo" accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    {% if asset.photo_url %}
                    <p class="text-sm text-gray-500 mt-1">Current photo: <a href="{{ asset.photo_url }}" target="_blank" class="text-blue-600">View</a></p>
                    {% endif %}
                </div>

                <!-- Status -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                    <select name="status" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="Active" {{ 'selected' if asset.status == 'Active' }}>Active</option>
                        <option value="Under Repair" {{ 'selected' if asset.status == 'Under Repair' }}>Under Repair</option>
                        <option value="In Storage" {{ 'selected' if asset.status == 'In Storage' }}>In Storage</option>
                        <option value="To be Disposed" {{ 'selected' if asset.status == 'To be Disposed' }}>To be Disposed</option>
                        <option value="Disposed" {{ 'selected' if asset.status == 'Disposed' }}>Disposed</option>
                        <option value="Lost" {{ 'selected' if asset.status == 'Lost' }}>Lost</option>
                    </select>
                </div>

                <!-- Company -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Company</label>
                    <select name="company" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        {% if dropdown_options and dropdown_options.companies %}
                        {% for company in dropdown_options.companies %}
                        <option value="{{ company.company_name }}" {{ 'selected' if (asset.ref_companies and asset.ref_companies.company_name == company.company_name) }}>{{ company.company_name }}</option>
                        {% endfor %}
                        {% endif %}
                    </select>
                </div>

                <!-- Location -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                    <select name="location" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        {% if dropdown_options and dropdown_options.locations %}
                        {% for location in dropdown_options.locations %}
                        <option value="{{ location.location_name }}" {{ 'selected' if (asset.ref_locations and asset.ref_locations.location_name == location.location_name) }}>{{ location.location_name }}</option>
                        {% endfor %}
                        {% endif %}
                    </select>
                </div>

                <!-- Room -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Room</label>
                    <select name="room" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        {% if dropdown_options and dropdown_options.locations %}
                        {% for location in dropdown_options.locations %}
                        <option value="{{ location.room_name }}" {{ 'selected' if (asset.ref_locations and asset.ref_locations.room_name == location.room_name) }}>{{ location.room_name }}</option>
                        {% endfor %}
                        {% endif %}
                    </select>
                </div>

                <!-- Business Unit -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Business Unit</label>
                    <select name="bisnis_unit" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select Business Unit</option>
                        {% if dropdown_options and dropdown_options.business_units %}
                        {% for unit in dropdown_options.business_units %}
                        <option value="{{ unit.business_unit_name }}" {{ 'selected' if (asset.ref_business_units and asset.ref_business_units.business_unit_name == unit.business_unit_name) }}>{{ unit.business_unit_name }}</option>
                        {% endfor %}
                        {% endif %}
                    </select>
                </div>

                <!-- Edit Reason -->
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Edit Reason</label>
                    <textarea name="edit_reason" required rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Reason for editing this asset..."></textarea>
                </div>
            </div>

            <!-- Buttons -->
            <div class="flex justify-end space-x-4 mt-6">
                <a href="/asset_management/list" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Cancel</a>
                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Submit for Approval</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}